var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,a){function s(t){try{h(n.next(t))}catch(e){a(e)}}function o(t){try{h(n["throw"](t))}catch(e){a(e)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,o)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,a&&(s=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],a=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e._stage=0,e.falg=!0,e.page=0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=this;egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){e.falg?e.translate():""}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.init()},e.prototype.init=function(){this._text=new egret.TextField,this._text.x=10,this._text.y=10,this._text.textColor=16753920,this._text.bold=!0,this._text.text="分数："+this._stage,this.addChild(this._text),this.setChildIndex(this._text,1),this.container=new egret.DisplayObjectContainer,this.addChild(this.container),this.setChildIndex(this.container,0),this.texts=new egret.TextField,this.texts.text="失败",this.texts.width=400,this.texts.height=200,this.texts.textColor=16777215,this.texts.bold=!0,this.texts.x=this.stage.stageWidth/2-200,this.texts.y=this.stage.stageHeight/2-100,this.texts.textAlign=egret.HorizontalAlign.CENTER,this.texts.verticalAlign=egret.VerticalAlign.MIDDLE,this.failbox=new egret.Shape,this.failbox.graphics.beginFill(0),this.failbox.graphics.lineStyle(2,0),this.failbox.graphics.drawRect(this.stage.stageWidth/2-200,this.stage.stageHeight/2-100,400,200),this.failbox.graphics.endFill(),this.initblack()},e.prototype.initblack=function(){for(var t=1;6>t;t++)this.createblack(this.stage.stageHeight-300*t);this.container.$children[0].touchEnabled=!0},e.prototype.createblack=function(t){var e=new egret.DisplayObjectContainer;this.container.addChild(e),e.x=0,e.y=t,e.touchEnabled=!1;for(var i=this,n=this.stage.stageWidth,r=Math.floor(4*Math.random()),a=0;4>a;a++){var s=new egret.Shape;s.graphics.beginFill(a==r?0:16777215),s.graphics.lineStyle(2,0),s.graphics.drawRect(0,0,n/4,300),s.graphics.endFill(),s.width=n/4,s.height=300,s.x=a*s.width,s.y=0,s.touchEnabled=!0,function(t,r,a,o){s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(s){t==r&&i.falg&&e.touchEnabled?(i._stage+=1,i._text.text="分数："+i._stage,a.graphics.beginFill(65535),a.graphics.lineStyle(2,0),a.graphics.drawRect(0,0,n/4,300),a.graphics.endFill(),o.touchEnabled=!1,i.page+=1,i.container.$children[i.page].touchEnabled=!0):t!==r&&i.falg&&(i.addChild(i.failbox),i.addChild(i.texts),i.setChildIndex(i.failbox,2),i.setChildIndex(i._text,3),i.falg=!1)},this)}(a,r,s,e),e.addChild(s)}},e.prototype.translate=function(){for(var t=0;t<this.container.$children.length;t++)this.container.$children[t].y+=4+this._stage/2;this.container.$children[0].y>=this.stage.stageHeight&&!this.container.$children[0].touchEnabled?(this.container.removeChild(this.container.$children[0]),this.createblack(this.container.$children[3].y-300),this.page-=1):this.container.$children[0].y>=this.stage.stageHeight&&this.container.$children[0].touchEnabled&&(this.addChild(this.failbox),this.addChild(this.texts),this.setChildIndex(this.failbox,2),this.setChildIndex(this._text,3),this.falg=!1)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);